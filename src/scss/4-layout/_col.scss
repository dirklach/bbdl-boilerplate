@use "../1-variables/" as *;
@use "../2-tools" as *;

// ==================================================================
// Layout / Col
// ==================================================================

/*

// ==================================================================
// Usage
// ==================================================================

// ------------------------------------------------------------------
// Without column definition (always full width)
// ------------------------------------------------------------------

<section class="section">
  <div class="container">
    <div class="col">…</div>
  </div>
</section>

// ------------------------------------------------------------------
// Span columns:
// ------------------------------------------------------------------
// - df, xs, sm: 12 columns (default)
// - md: 6 columns
// - lg, xl, xxl, xxxl: 4 columns
// ------------------------------------------------------------------

<section class="section">
  <div class="container">
    <div class="col md:6 / lg:4">…</div>
  </div>
</section>

// ------------------------------------------------------------------
// Offset & span columns:
// ------------------------------------------------------------------
// - df, xs, sm: 0 columns offset + 12 columns
// - md: 2 columns offset + 6 columns 
// - lg, xl, xxl, xxxl: 2 columns offset + 4 columns
// ------------------------------------------------------------------

<section class="section">
  <div class="container">
    <div class="col md:off-2">…</div>
    <div class="col md:6 / lg:4">…</div>
  </div>
</section>


// ------------------------------------------------------------------
// Column area:
// ------------------------------------------------------------------
// - df, xs, sm: 12 columns (default)
// - md: column 2-5
// - lg, xl, xxl, xxxl: column 4-10
// ------------------------------------------------------------------

<section class="section">
  <div class="container">
    <div class="col md:2-5 / lg:4-10">…</div>
  </div>
</section>

*/
.col {
  grid-column: span 12;
}

// ==================================================================
// Mixin for column and offset classes
// ==================================================================
@mixin generate-grid($prefix, $min-width) {
  @media (min-width: $min-width) {
    // Handle column spans
    @for $i from 1 through 12 {
      .#{$prefix}\:#{$i} {
        grid-column: span #{$i} / span #{$i};
      }
    }

    // Handle offsets
    @for $i from 0 through 12 {
      .#{$prefix}\:off-#{$i} {
        grid-column: span #{$i} / span #{$i};
        display: block;
      }
    }

    // Specifically handle the 0 offset case
    .#{$prefix}\:off-0 {
      display: none;
    }

    // Handle start-end columns for area spans
    @for $start from 1 through 12 {
      @for $end from ($start + 1) through 13 {
        $end-grid-value: if($end == 13, 13, $end);

        .#{$prefix}\:#{$start}-#{$end - 1} {
          grid-column: #{$start} / #{$end-grid-value};
          display: block;
        }
      }
    }

    // Handle starting column only
    @for $start from 1 through 12 {
      .#{$prefix}\:start-#{$start} {
        grid-column-start: #{$start};
      }
    }
  }
}

// ==================================================================
// Default display: none for all offset classes
// ==================================================================
@for $i from 0 through 12 {
  [class*="off-#{$i}"] {
    display: none;
  }
}

// ==================================================================
// Loop through breakpoints map to generate grid and offset classes
// ==================================================================
@each $prefix, $min-width in $breakpoints {
  @include generate-grid($prefix, $min-width);
}
